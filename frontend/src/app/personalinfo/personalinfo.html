<div class="mgmt-container">
  <div class="header-section">
    <h1>Manage Profile Information</h1>
  </div>

  @if (successMsg()) {
    <div class="toast-success">{{ successMsg() }}</div>
  }

  <div class="form-card">
    <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
      <input type="hidden" formControlName="id">

      <div class="form-grid">
        <div class="form-group">
          <label>Full Name</label>
          <input formControlName="full_name" type="text">
        </div>

        <div class="form-group">
          <label>Current Title</label>
          <input formControlName="current_title" type="text">
        </div>

        <div class="form-group full-width">
          <label>Summary Bio</label>
          <textarea formControlName="summary" rows="4"></textarea>
        </div>

        <div class="form-group full-width">
          <label>Profile Photo</label>
          <div class="file-upload-wrapper">
            <div *ngIf="currentPhoto" class="preview-container">
              <div class="preview-card photo-accent">
                <img [src]="'http://localhost:3000/public/resumes/' + currentPhoto" class="thumb-img">
                <div class="text-group">
                  <label>Current Photo</label>
                  <span class="file-name">{{ currentPhoto }}</span>
                </div>
                <a [href]="'http://localhost:3000/public/resumes/' + currentPhoto" target="_blank" class="view-btn">View Full</a>
              </div>
            </div>
            <input type="file" (change)="onPhotoSelected($event)" accept="image/*">
            <small class="file-hint">Recommended: Square JPG or PNG</small>
          </div>
        </div>

        <div class="form-group full-width">
          <label>Resume (PDF or DOCX)</label>
          <div class="file-upload-wrapper">
            <div *ngIf="currentResume" class="preview-container">
              <div class="preview-card resume-accent">
                <span class="file-icon">ðŸ“„</span>
                <div class="text-group">
                  <label>Current Resume</label>
                  <span class="file-name">{{ currentResume }}</span>
                </div>
                <a [href]="'http://localhost:3000/public/resumes/' + currentResume" target="_blank" class="view-btn">Download</a>
              </div>
            </div>
            <input type="file" (change)="onFileSelected($event)" accept=".pdf,.doc,.docx">
            <small class="file-hint">Leave empty to keep current file</small>
          </div>
        </div>

      </div>

      <div class="form-footer">
        <button type="submit" class="btn-save" [disabled]="isSubmitting()">
          {{ isSubmitting() ? 'Saving Changes...' : 'Update Profile' }}
        </button>
      </div>
    </form>
  </div>
</div>