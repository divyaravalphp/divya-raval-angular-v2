<div class="admin-container">
  <div class="header-section">
    <h2>Social Media Links</h2>
    <button (click)="openModal()" class="btn-teal">+ Add Link</button>
  </div>

  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Platform</th>
          <th>Icon Class</th>
          <th>URL</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (link of socialService.links(); track link.id) {
          <tr>
            <td><strong>{{ link.platform_name }}</strong></td>
            <td><code>{{ link.icon_class }}</code></td>
            <td><a [href]="link.url" target="_blank">{{ link.url }}</a></td>
            <td>
              <button (click)="openModal(link)" class="btn-edit">Edit</button>
              <button (click)="delete(link.id!)" class="btn-delete">Delete</button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>

@if (isModalOpen()) {
  <div class="modal-backdrop">
    <div class="modal-card">
      <div class="modal-header">
        <h3>{{ editMode() ? 'Edit Link' : 'New Social Link' }}</h3>
        <button (click)="isModalOpen.set(false)">Ã—</button>
      </div>
      <form [formGroup]="socialForm" (ngSubmit)="save()" class="modal-form">
        <input formControlName="platform_name" placeholder="Platform Name (e.g. LinkedIn)">
        <input formControlName="url" placeholder="Full URL (https://...)">
        <input formControlName="icon_class" placeholder="Icon Class (e.g. bi bi-github)">
        
        <div class="modal-actions">
          <button type="button" (click)="isModalOpen.set(false)">Cancel</button>
          <button type="submit" class="btn-teal" [disabled]="socialForm.invalid">Save</button>
        </div>
      </form>
    </div>
  </div>
}